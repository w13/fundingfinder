{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/waqqashanafi/Repositories/FundingFinder/fundingfinder/components/SearchForm.tsx"],"sourcesContent":["type SearchFormProps = {\n  query?: string;\n  source?: string;\n  minScore?: string;\n  mode?: \"smart\" | \"exact\" | \"any\";\n  sources?: Array<{ id: string; name: string; country?: string | null }>;\n};\n\nexport default function SearchForm({ query, source, minScore, mode = \"smart\", sources = [] }: SearchFormProps) {\n  return (\n    <form method=\"get\" action=\"/\" className=\"card card--flat grid search-form\">\n      <label style={{ display: \"grid\", gap: \"6px\" }}>\n        <span className=\"pill\">Keyword search</span>\n        <input\n          className=\"input\"\n          name=\"q\"\n          defaultValue={query}\n          placeholder=\"digital therapeutics, clinical decision support\"\n        />\n      </label>\n      <label style={{ display: \"grid\", gap: \"6px\" }}>\n        <span className=\"pill\">Source</span>\n        <input\n          className=\"input\"\n          list=\"sourceOptions\"\n          name=\"source\"\n          defaultValue={source ?? \"\"}\n          placeholder=\"all sources\"\n        />\n        <datalist id=\"sourceOptions\">\n          {sources.map((item) => (\n            <option key={item.id} value={item.id}>\n              {item.name}\n            </option>\n          ))}\n        </datalist>\n      </label>\n      <label style={{ display: \"grid\", gap: \"6px\" }}>\n        <span className=\"pill\">Min feasibility</span>\n        <input className=\"input\" name=\"minScore\" defaultValue={minScore} placeholder=\"80\" />\n      </label>\n      <label style={{ display: \"grid\", gap: \"6px\" }}>\n        <span className=\"pill\">Search mode</span>\n        <select className=\"select\" name=\"mode\" defaultValue={mode}>\n          <option value=\"smart\">Smart (all terms)</option>\n          <option value=\"any\">Any term</option>\n          <option value=\"exact\">Exact phrase</option>\n        </select>\n      </label>\n      <button type=\"submit\" className=\"button\">\n        Search\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAQe,SAAS,WAAW,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,OAAO,EAAE,UAAU,EAAE,EAAmB;IAC3G,qBACE,gSAAC;QAAK,QAAO;QAAM,QAAO;QAAI,WAAU;;0BACtC,gSAAC;gBAAM,OAAO;oBAAE,SAAS;oBAAQ,KAAK;gBAAM;;kCAC1C,gSAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,gSAAC;wBACC,WAAU;wBACV,MAAK;wBACL,cAAc;wBACd,aAAY;;;;;;;;;;;;0BAGhB,gSAAC;gBAAM,OAAO;oBAAE,SAAS;oBAAQ,KAAK;gBAAM;;kCAC1C,gSAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,gSAAC;wBACC,WAAU;wBACV,MAAK;wBACL,MAAK;wBACL,cAAc,UAAU;wBACxB,aAAY;;;;;;kCAEd,gSAAC;wBAAS,IAAG;kCACV,QAAQ,GAAG,CAAC,CAAC,qBACZ,gSAAC;gCAAqB,OAAO,KAAK,EAAE;0CACjC,KAAK,IAAI;+BADC,KAAK,EAAE;;;;;;;;;;;;;;;;0BAM1B,gSAAC;gBAAM,OAAO;oBAAE,SAAS;oBAAQ,KAAK;gBAAM;;kCAC1C,gSAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,gSAAC;wBAAM,WAAU;wBAAQ,MAAK;wBAAW,cAAc;wBAAU,aAAY;;;;;;;;;;;;0BAE/E,gSAAC;gBAAM,OAAO;oBAAE,SAAS;oBAAQ,KAAK;gBAAM;;kCAC1C,gSAAC;wBAAK,WAAU;kCAAO;;;;;;kCACvB,gSAAC;wBAAO,WAAU;wBAAS,MAAK;wBAAO,cAAc;;0CACnD,gSAAC;gCAAO,OAAM;0CAAQ;;;;;;0CACtB,gSAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,gSAAC;gCAAO,OAAM;0CAAQ;;;;;;;;;;;;;;;;;;0BAG1B,gSAAC;gBAAO,MAAK;gBAAS,WAAU;0BAAS;;;;;;;;;;;;AAK/C"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///Users/waqqashanafi/Repositories/FundingFinder/fundingfinder/lib/opportunities.ts"],"sourcesContent":["import type { OpportunityDetail, OpportunitySearchResponse } from \"./types\";\n\nconst API_BASE_URL =\n  process.env.GRANT_SENTINEL_API_URL ?? process.env.NEXT_PUBLIC_GRANT_SENTINEL_API_URL ?? \"\";\n\nexport async function fetchOpportunities(params: {\n  query?: string;\n  source?: string;\n  minScore?: string;\n  limit?: number;\n  mode?: \"smart\" | \"exact\" | \"any\";\n}): Promise<OpportunitySearchResponse> {\n  if (!API_BASE_URL) {\n    return {\n      items: [],\n      warning: \"Set GRANT_SENTINEL_API_URL to your Worker API endpoint.\"\n    };\n  }\n\n  const url = new URL(\"/api/opportunities\", API_BASE_URL);\n  if (params.query) url.searchParams.set(\"query\", params.query);\n  if (params.source) url.searchParams.set(\"source\", params.source);\n  if (params.minScore) url.searchParams.set(\"minScore\", params.minScore);\n  if (typeof params.limit === \"number\") url.searchParams.set(\"limit\", params.limit.toString());\n  if (params.mode) url.searchParams.set(\"mode\", params.mode);\n\n  const response = await fetch(url.toString(), { cache: \"no-store\" });\n  if (!response.ok) {\n    return {\n      items: [],\n      warning: `API error ${response.status}`\n    };\n  }\n\n  const payload = (await response.json()) as OpportunitySearchResponse;\n  return {\n    items: payload.items ?? [],\n    warning: payload.warning\n  };\n}\n\nexport async function fetchOpportunityById(id: string): Promise<OpportunityDetail | null> {\n  if (!API_BASE_URL) return null;\n  const url = new URL(`/api/opportunities/${id}`, API_BASE_URL);\n  const response = await fetch(url.toString(), { cache: \"no-store\" });\n  if (!response.ok) return null;\n  const payload = (await response.json()) as { item?: OpportunityDetail };\n  return payload.item ?? null;\n}\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,eACJ,QAAQ,GAAG,CAAC,sBAAsB,oFAAsD;AAEnF,eAAe,mBAAmB,MAMxC;IACC,IAAI,CAAC,cAAc;QACjB,OAAO;YACL,OAAO,EAAE;YACT,SAAS;QACX;IACF;IAEA,MAAM,MAAM,IAAI,IAAI,sBAAsB;IAC1C,IAAI,OAAO,KAAK,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS,OAAO,KAAK;IAC5D,IAAI,OAAO,MAAM,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,UAAU,OAAO,MAAM;IAC/D,IAAI,OAAO,QAAQ,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,YAAY,OAAO,QAAQ;IACrE,IAAI,OAAO,OAAO,KAAK,KAAK,UAAU,IAAI,YAAY,CAAC,GAAG,CAAC,SAAS,OAAO,KAAK,CAAC,QAAQ;IACzF,IAAI,OAAO,IAAI,EAAE,IAAI,YAAY,CAAC,GAAG,CAAC,QAAQ,OAAO,IAAI;IAEzD,MAAM,WAAW,MAAM,MAAM,IAAI,QAAQ,IAAI;QAAE,OAAO;IAAW;IACjE,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,OAAO;YACL,OAAO,EAAE;YACT,SAAS,CAAC,UAAU,EAAE,SAAS,MAAM,EAAE;QACzC;IACF;IAEA,MAAM,UAAW,MAAM,SAAS,IAAI;IACpC,OAAO;QACL,OAAO,QAAQ,KAAK,IAAI,EAAE;QAC1B,SAAS,QAAQ,OAAO;IAC1B;AACF;AAEO,eAAe,qBAAqB,EAAU;IACnD,IAAI,CAAC,cAAc,OAAO;IAC1B,MAAM,MAAM,IAAI,IAAI,CAAC,mBAAmB,EAAE,IAAI,EAAE;IAChD,MAAM,WAAW,MAAM,MAAM,IAAI,QAAQ,IAAI;QAAE,OAAO;IAAW;IACjE,IAAI,CAAC,SAAS,EAAE,EAAE,OAAO;IACzB,MAAM,UAAW,MAAM,SAAS,IAAI;IACpC,OAAO,QAAQ,IAAI,IAAI;AACzB"}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///Users/waqqashanafi/Repositories/FundingFinder/fundingfinder/lib/sources.ts"],"sourcesContent":["import type { SourceOption } from \"./types\";\n\nconst API_BASE_URL =\n  process.env.GRANT_SENTINEL_API_URL ?? process.env.NEXT_PUBLIC_GRANT_SENTINEL_API_URL ?? \"\";\n\nexport async function fetchSourceOptions(): Promise<{ sources: SourceOption[]; warning?: string }> {\n  if (!API_BASE_URL) {\n    return { sources: [], warning: \"Set GRANT_SENTINEL_API_URL to your Worker API endpoint.\" };\n  }\n  const response = await fetch(new URL(\"/api/sources\", API_BASE_URL), { cache: \"no-store\" });\n  if (!response.ok) {\n    return { sources: [], warning: `API error ${response.status}` };\n  }\n  const payload = (await response.json()) as { sources: SourceOption[] };\n  return { sources: payload.sources ?? [] };\n}\n"],"names":[],"mappings":";;;;AAEA,MAAM,eACJ,QAAQ,GAAG,CAAC,sBAAsB,oFAAsD;AAEnF,eAAe;IACpB,IAAI,CAAC,cAAc;QACjB,OAAO;YAAE,SAAS,EAAE;YAAE,SAAS;QAA0D;IAC3F;IACA,MAAM,WAAW,MAAM,MAAM,IAAI,IAAI,gBAAgB,eAAe;QAAE,OAAO;IAAW;IACxF,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,OAAO;YAAE,SAAS,EAAE;YAAE,SAAS,CAAC,UAAU,EAAE,SAAS,MAAM,EAAE;QAAC;IAChE;IACA,MAAM,UAAW,MAAM,SAAS,IAAI;IACpC,OAAO;QAAE,SAAS,QAAQ,OAAO,IAAI,EAAE;IAAC;AAC1C"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/waqqashanafi/Repositories/FundingFinder/fundingfinder/app/page.tsx"],"sourcesContent":["import SearchForm from \"../components/SearchForm\";\nimport OpportunityList from \"../components/OpportunityList\";\nimport { fetchOpportunities } from \"../lib/opportunities\";\nimport { fetchSourceOptions } from \"../lib/sources\";\nimport { fetchShortlist } from \"../lib/shortlist\";\n\ntype PageProps = {\n  searchParams?: Promise<Record<string, string | string[] | undefined>> | Record<string, string | string[] | undefined>;\n};\n\nexport default async function Page({ searchParams }: PageProps) {\n  const resolvedSearchParams = searchParams instanceof Promise ? await searchParams : (searchParams ?? {});\n  const query = typeof resolvedSearchParams?.q === \"string\" ? resolvedSearchParams.q : \"\";\n  const source = typeof resolvedSearchParams?.source === \"string\" ? resolvedSearchParams.source : \"\";\n  const minScore = typeof resolvedSearchParams?.minScore === \"string\" ? resolvedSearchParams.minScore : \"\";\n  const rawMode = typeof resolvedSearchParams?.mode === \"string\" ? resolvedSearchParams.mode : \"smart\";\n  const resolvedMode = rawMode === \"exact\" || rawMode === \"any\" ? rawMode : \"smart\";\n\n  const [{ items, warning }, sourcesResult, shortlistResult] = await Promise.all([\n    fetchOpportunities({\n      query: query || undefined,\n      source: source || undefined,\n      minScore: minScore || undefined,\n      mode: resolvedMode\n    }),\n    fetchSourceOptions(),\n    fetchShortlist()\n  ]);\n\n  const shortlistKeys = shortlistResult.items.map((item) => `${item.source}:${item.opportunityId}`);\n\n  const combinedWarning = warning ?? sourcesResult.warning ?? shortlistResult.warning;\n\n  return (\n    <div className=\"grid\">\n      <section className=\"hero\">\n        <p className=\"pill\">AI-native grant aggregation</p>\n        <h2 className=\"hero__title\">Funding Intelligence Dashboard</h2>\n        <p className=\"hero__subtitle\">\n          The Grant Sentinel funnel mirrors public grant metadata, filters for private-sector eligibility, and escalates\n          the top matches into AI-powered feasibility scoring.\n        </p>\n        {combinedWarning ? (\n          <div className=\"card card--flat\" style={{ background: \"#fef3c7\", color: \"#92400e\" }}>\n            {combinedWarning}\n          </div>\n        ) : null}\n      </section>\n\n      <section className=\"grid grid-3\">\n        <div className=\"card\">\n          <h3 style={{ marginTop: 0 }}>Stage 1 · Metadata Mirror</h3>\n          <p className=\"muted\">\n            Polls federal APIs and global funding registries to capture the latest listings with private-sector eligibility.\n          </p>\n        </div>\n        <div className=\"card\">\n          <h3 style={{ marginTop: 0 }}>Stage 2 · PDF Harvester</h3>\n          <p className=\"muted\">\n            Uses Browser Rendering and R2 storage to extract program requirements and evaluation criteria at scale.\n          </p>\n        </div>\n        <div className=\"card\">\n          <h3 style={{ marginTop: 0 }}>Stage 3 · AI Analyst</h3>\n          <p className=\"muted\">\n            Scores feasibility, profitability, and vectors each opportunity for semantic search.\n          </p>\n        </div>\n      </section>\n\n      <SearchForm query={query} source={source} minScore={minScore} mode={resolvedMode} sources={sourcesResult.sources} />\n\n      <OpportunityList items={items} shortlistKeys={shortlistKeys} showShortlistActions />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;AAMe,eAAe,KAAK,EAAE,YAAY,EAAa;IAC5D,MAAM,uBAAuB,wBAAwB,UAAU,MAAM,eAAgB,gBAAgB,CAAC;IACtG,MAAM,QAAQ,OAAO,sBAAsB,MAAM,WAAW,qBAAqB,CAAC,GAAG;IACrF,MAAM,SAAS,OAAO,sBAAsB,WAAW,WAAW,qBAAqB,MAAM,GAAG;IAChG,MAAM,WAAW,OAAO,sBAAsB,aAAa,WAAW,qBAAqB,QAAQ,GAAG;IACtG,MAAM,UAAU,OAAO,sBAAsB,SAAS,WAAW,qBAAqB,IAAI,GAAG;IAC7F,MAAM,eAAe,YAAY,WAAW,YAAY,QAAQ,UAAU;IAE1E,MAAM,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,eAAe,gBAAgB,GAAG,MAAM,QAAQ,GAAG,CAAC;QAC7E,IAAA,4LAAkB,EAAC;YACjB,OAAO,SAAS;YAChB,QAAQ,UAAU;YAClB,UAAU,YAAY;YACtB,MAAM;QACR;QACA,IAAA,sLAAkB;QAClB,IAAA,oLAAc;KACf;IAED,MAAM,gBAAgB,gBAAgB,KAAK,CAAC,GAAG,CAAC,CAAC,OAAS,GAAG,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,aAAa,EAAE;IAEhG,MAAM,kBAAkB,WAAW,cAAc,OAAO,IAAI,gBAAgB,OAAO;IAEnF,qBACE,gSAAC;QAAI,WAAU;;0BACb,gSAAC;gBAAQ,WAAU;;kCACjB,gSAAC;wBAAE,WAAU;kCAAO;;;;;;kCACpB,gSAAC;wBAAG,WAAU;kCAAc;;;;;;kCAC5B,gSAAC;wBAAE,WAAU;kCAAiB;;;;;;oBAI7B,gCACC,gSAAC;wBAAI,WAAU;wBAAkB,OAAO;4BAAE,YAAY;4BAAW,OAAO;wBAAU;kCAC/E;;;;;+BAED;;;;;;;0BAGN,gSAAC;gBAAQ,WAAU;;kCACjB,gSAAC;wBAAI,WAAU;;0CACb,gSAAC;gCAAG,OAAO;oCAAE,WAAW;gCAAE;0CAAG;;;;;;0CAC7B,gSAAC;gCAAE,WAAU;0CAAQ;;;;;;;;;;;;kCAIvB,gSAAC;wBAAI,WAAU;;0CACb,gSAAC;gCAAG,OAAO;oCAAE,WAAW;gCAAE;0CAAG;;;;;;0CAC7B,gSAAC;gCAAE,WAAU;0CAAQ;;;;;;;;;;;;kCAIvB,gSAAC;wBAAI,WAAU;;0CACb,gSAAC;gCAAG,OAAO;oCAAE,WAAW;gCAAE;0CAAG;;;;;;0CAC7B,gSAAC;gCAAE,WAAU;0CAAQ;;;;;;;;;;;;;;;;;;0BAMzB,gSAAC,sLAAU;gBAAC,OAAO;gBAAO,QAAQ;gBAAQ,UAAU;gBAAU,MAAM;gBAAc,SAAS,cAAc,OAAO;;;;;;0BAEhH,gSAAC,2LAAe;gBAAC,OAAO;gBAAO,eAAe;gBAAe,oBAAoB;;;;;;;;;;;;AAGvF"}}]
}